language: csharp
solution: Library.sln
mono: none
dist: xenial
dotnet: 5.0.202
before_install:
  - sudo apt-get update -qq > /dev/null
  - sudo apt-get install -qq mono-devel mono-gmcs > /dev/null
  - mozroots --import --sync
  - mv -f src/.nuget/NuGet.mono.targets src/.nuget/NuGet.targets
  - chmod +x lib/xunit/xunit.console.clr4.x86.exe
  - export EnableNuGetPackageRestore=true
install:
  - nuget restore Library.Test/Library.Test.sln
  - nuget install xunit.runners -Version 1.9.2 -OutputDirectory testrunner
script:
  - dotnet restore
  - msbuild /p:Configuration=Debug Library.sln
  - mono ./testrunner/xunit.runners.1.9.2/tools/xunit.console.clr4.exe ./Library.Test/bin/Debug/netcoreapp3.1/testhost.dll